(function(h){function q(w,n){function k(){if(x)r();else{var a=document.createElement("script");a.src="http://www.youtube.com/player_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);window.onYouTubePlayerAPIReady=function(){r()}}}function r(){a=new YT.Player(l[0],{events:{onReady:function(){p=!0;"playVideo"!=e.settings.reachVideoAction||g||(g=!0,m())},onStateChange:function(a){switch(a.data){case YT.PlayerState.BUFFERING:f||(f=!0,c("start"));break;case YT.PlayerState.PLAYING:f||
(f=!0,c("start"));d||(d=!0,c("play"));break;case YT.PlayerState.PAUSED:d&&(d=!1,c("pause"));break;case YT.PlayerState.ENDED:d=!1,c("end")}}}})}function q(){a=Froogaloop(l[0]);a.addEvent("ready",function(b){p=!0;"playVideo"!=e.settings.reachVideoAction||g||(g=!0,m());a.addEvent("loadProgress",function(a){f||(f=!0,c("start"))});a.addEvent("play",function(a){f||(f=!0,c("start"));d||(d=!0,c("play"))});a.addEvent("pause",function(a){d&&(d=!1,c("pause"))});a.addEvent("finish",function(a){d=!1;c("end")})})}
function y(){(window.videojs||window.VideoJS)(l.attr("id")).ready(function(){a=this;p=!0;"playVideo"!=e.settings.reachVideoAction||g||(g=!0,m());a.on("play",function(){f||(f=!0,c("start"));d||(d=!0,c("play"))});a.on("pause",function(){d&&(d=!1,c("pause"))});a.on("ended",function(){d=!1;c("end")});a.on("enterFullWindow",function(){c("fullscreenchange")});a.on("exitFullWindow",function(){c("fullscreenchange")})})}function z(){if(A)s();else var a=setInterval(function(){sublimevideo.prepare&&(clearInterval(a),
s())},100)}function s(){"playVideo"!=e.settings.reachVideoAction||g||(g=!0,m());sublimevideo.onStart(function(){c("start");c("play")});sublimevideo.onEnd(function(){c("end")})}function B(){a=l[0];p=!0;"playVideo"!=e.settings.reachVideoAction||g||(g=!0,m());a.addEventListener("play",function(){f||(f=!0,c("start"));d||(d=!0,c("play"))});a.addEventListener("pause",function(){d&&(d=!1,c("pause"))});a.addEventListener("ended",function(){d=!1;c("end")})}function C(){var b=l.find("object").length?l.find("object").attr("id"):
l.attr("id");a=jwplayer(b);p=!0;"playVideo"!=e.settings.reachVideoAction||g||(g=!0,m());a.onPlay(function(){f||(f=!0,c("start"));d||(d=!0,c("play"))});a.onBuffer(function(){f||(f=!0,c("start"))});a.onPause(function(){d&&(d=!1,c("pause"))});a.onComplete(function(){d=!1;c("end")})}function m(){"youtube-video"==b?a.playVideo():"vimeo-video"==b?a.api("play"):"html5-video-js"==b?a.play():"html5-sublime-video"==b?sublimevideo.play():"html5-video"==b?a.play():"jw-player-video"==b&&a.play(!0)}function t(){"youtube-video"==
b?(a.seekTo(1),a.stopVideo()):"vimeo-video"==b?(a.api("pause"),a.api("unload")):"html5-video-js"==b?(a.currentTime(0),a.pause()):"html5-sublime-video"==b?sublimevideo.stop():"html5-video"==b?(a.currentTime=0,a.pause()):"jw-player-video"==b&&(a.seek(0),a.pause(!0))}function u(){"youtube-video"==b?a.pauseVideo():"vimeo-video"==b?a.api("pause"):"html5-video-js"==b?a.pause():"html5-sublime-video"==b?sublimevideo.stop():"html5-video"==b?a.pause():"jw-player-video"==b&&a.pause(!0)}function v(){"youtube-video"==
b?a.stopVideo():"vimeo-video"==b?a.api("pause"):"html5-video-js"==b?a.pause():"html5-sublime-video"==b?sublimevideo.stop():"html5-video"==b?a.pause():"jw-player-video"==b&&a.pause(!0)}function c(a){var b={type:a};switch(a){case "start":h.isFunction(e.settings.start)&&e.settings.start.call(this,b);break;case "play":h.isFunction(e.settings.play)&&e.settings.play.call(this,b);break;case "pause":h.isFunction(e.settings.pause)&&e.settings.pause.call(this,b);break;case "end":h.isFunction(e.settings.end)&&
e.settings.end.call(this,b);break;case "fullscreenchange":h.isFunction(e.settings.fullscreenchange)&&e.settings.fullscreenchange.call(this,b)}}this.settings=h.extend({},h.fn.videoController.defaults,n);var l=h(w),e=this,b,a,x=window.YT&&window.YT.Player,A=window.sublimevideo&&window.sublimevideo.prepare,p=!1,g=!1,f=!1,d=!1;b=e.settings.videoType;switch(b){case "youtube-video":k();break;case "vimeo-video":q();break;case "html5-video-js":y();break;case "html5-sublime-video":z();break;case "html5-video":B();
break;case "jw-player-video":C()}this.reachVideo=function(){"playVideo"==e.settings.reachVideoAction&&p&&!g&&(g=!0,m())};this.leaveVideo=function(){g=!1;if(f&&a||"html5-sublime-video"==b)"stopVideo"==e.settings.leaveVideoAction||"removeVideo"==e.settings.leaveVideoAction?t():"pauseVideoAndBuffering"==e.settings.leaveVideoAction?v():"pauseVideo"==e.settings.leaveVideoAction&&u()};this.stopVideo=t;this.pauseVideo=u;this.replayVideo=function(){"youtube-video"==b?(a.seekTo(1),a.playVideo()):"vimeo-video"==
b?a.api("play"):"html5-video-js"==b?(a.currentTime(0),a.play()):"html5-sublime-video"==b?sublimevideo.play():"html5-video"==b?(a.currentTime=0,a.play()):"jw-player-video"==b&&(a.seek(0),a.play(!0))};this.pauseVideoAndBuffering=v}h.fn.videoController=function(h){for(var n=[],k=0;k<this.length;k++)this[k].videoControllerInstance||(this[k].videoControllerInstance=new q(this[k],h)),n.push(this[k].videoControllerInstance);return 1<n.length?n:n[0]};h.fn.videoController.defaults={start:null,play:null,pause:null,
end:null,videoType:null,fullscreenchange:null,reachVideoAction:"none",leaveVideoAction:"pauseVideo"}})(jQuery);